<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#ffffff">
    <link rel="apple-touch-icon" href="./icons/192.webp">
    <title>Прочитай букву</title>
    <style>
        :root {
            --primary-color: #4a86e8;
            --primary-dark: #3a76d8;
            --primary-light: #c9daf8;
            --success-color: #34c759;
            --error-color: #ff3b30;
            --warning-color: #ff9500;
            --bg-color: #f8f9fa;
            --panel-bg: #ffffff;
            --text-color: #333333;
            --header-color: #1f3a60;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --radius: 16px;
            --spacing: 20px;
            --font-family: 'Arial Rounded MT Bold', 'Segoe UI', 'Arial', sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: var(--font-family);
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.5;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: var(--spacing);
        }

        /* Типография */
        h1,
        h3 {
            text-align: center;
            color: var(--header-color);
            margin-bottom: 15px;
        }

        h1 {
            font-size: 32px;
            margin-bottom: 0px;
        }

        h3 {
            font-size: 22px;
        }

        .hide {
            display: none;
        }

        /* Общие компоненты */
        .panel {
            background-color: white;
            padding: var(--spacing);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: var(--spacing);
            border: 1px solid var(--primary-light);
        }

        /* Кнопки */
        .btn {
            padding: 10px 18px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            font-size: 16px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background-color: #f1f1f1;
            color: var(--text-color);
        }

        .btn-secondary:hover {
            background-color: #e5e5e5;
        }

        .btn.active {
            background-color: var(--primary-color);
            color: white;
            box-shadow: 0 2px 8px rgba(74, 134, 232, 0.4);
        }

        .toggle-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        /* Настройки игры */
        .game-settings {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            background-color: var(--panel-bg);
            padding: 20px;
            border-radius: var(--radius);
            margin-bottom: var(--spacing);
            flex-wrap: wrap;
            gap: 20px;
            border: 1px solid var(--primary-light);
        }

        .mode-selector {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            flex-direction: column;
            width: 100%;
        }

        .mode-selector label {
            font-weight: 600;
            color: var(--header-color);
            font-size: 18px;
        }

        .hide-images,
        .mute-sounds {
            display: flex;
            align-items: center;
            gap: 15px;
            align-self: flex-start;
        }

        .hide-images label,
        .mute-sounds label {
            font-weight: 600;
            color: var(--header-color);
        }

        .word-length-selector {
            width: 100%;
            margin: 15px 0 10px;
        }

        .word-length-selector label {
            font-weight: 600;
            color: var(--header-color);
            display: block;
            margin-bottom: 10px;
        }

        .letters-goal {
            display: none;
            align-items: center;
            justify-content: space-between;
            gap: 15px;
        }

        .letters-goal.active {
            display: flex;
        }

        .letters-goal label {
            font-weight: 600;
            color: var(--header-color);
        }

        .letters-goal input {
            padding: 8px 12px;
            border: 2px solid var(--primary-light);
            border-radius: 8px;
            font-size: 16px;
        }

        input[type="number"] {
            padding: 8px 12px;
            border: 2px solid var(--primary-light);
            border-radius: 8px;
            font-size: 16px;
            width: 70px;
        }

        /* Таймер и прогресс */
        .timer-container,
        .progress-container {
            margin-bottom: var(--spacing);
        }

        .timer-bar,
        .count-bar {
            height: 24px;
            background-color: #f1f1f1;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 15px;
            border: 1px solid #e5e5e5;
        }

        #timer-progress,
        #count-progress {
            height: 100%;
            background-color: var(--success-color);
            width: 100%;
            transition: width 0.3s linear;
            border-radius: 12px;
        }

        .timer-display {
            text-align: center;
            margin: 20px 0;
            font-size: 28px;
            font-weight: bold;
            color: var(--header-color);
        }

        .timer-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        #letters-count {
            text-align: left;
            margin: 10px 0;
            font-weight: 600;
            font-size: 18px;
            color: var(--header-color);
        }

        /* Область с изображениями */
        .image-panels {
            display: flex;
            margin-bottom: var(--spacing);
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
        }

        .image-panel {
            height: 160px;
            width: 120px;
            background-color: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.3s;
            border-top: 2px solid #e5e5e5;
            border-bottom: 2px solid #e5e5e5;
        }

        .image-panels.alpabet {
            gap: 14px;
        }

        .image-panels.alpabet .image-panel {
            border: 2px solid #e5e5e5;
            border-radius: var(--radius);
        }

        .image-panel:first-child {
            border-top-left-radius: var(--radius);
            border-bottom-left-radius: var(--radius);
            border-left: 2px solid #e5e5e5;
        }

        .image-panel:last-child {
            border-top-right-radius: var(--radius);
            border-bottom-right-radius: var(--radius);
            border-right: 2px solid #e5e5e5;
        }

        /* Случай, когда элемент один (одновременно первый и последний) */
        .image-panel:first-child:last-child {
            border: 2px solid #e5e5e5;
        }

        /* Убираем правую границу у элементов, которые не последние */
        .image-panel:not(:last-child) {
            border-right: none;
        }

        /* Убираем левую границу у элементов, которые не первые */
        .image-panel:not(:first-child) {
            border-left: none;
        }

        .image-panel:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }

        .image-panel:active {
            transform: translateY(0);
        }

        .image-word {
            width: 100px;
            height: 130px;
            transition: all 0.5s ease-in;
            background: url("./images/alpa.webp");
        }

        .image-panel.hidden div {
            opacity: 0;
        }

        .image-panel.hidden::before {
            content: "?";
            position: absolute;
            font-size: 54px;
            color: #7f8c8d;
            font-weight: bold;
        }

        .image-panel.correct {
            background-color: rgba(52, 199, 89, 0.15);
            border: 2px solid var(--success-color);
            animation: correctPulse 1s;
        }

        .image-panel.wrong {
            background-color: rgba(255, 59, 48, 0.15);
            border: 2px solid var(--error-color);
            animation: wrongShake 0.5s;
        }

        @keyframes correctPulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes wrongShake {
            0% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-5px);
            }

            50% {
                transform: translateX(5px);
            }

            75% {
                transform: translateX(-5px);
            }

            100% {
                transform: translateX(0);
            }
        }

        /* Текущая буква и цель */
        .current-target {
            text-align: center;
            margin-bottom: 30px;
            margin-top: 30px;
        }

        .current-target h2 {
            font-size: 28px;
            color: var(--header-color);
        }

        .toggle-buttons-container {
            width: 100%;
        }

        #current-letter {
            display: inline-block;
            padding: 12px 24px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 12px;
            font-size: 36px;
            margin-left: 10px;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(74, 134, 232, 0.3);
            text-transform: uppercase;
            margin-top: 10px;
        }

        /* Кнопки ответов */
        .answer-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .answer-btn {
            padding: 15px 25px;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 150px;
        }

        .answer-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }

        .answer-btn:active {
            transform: translateY(0);
        }

        .answer-btn.correct {
            background-color: var(--success-color);
            color: white;
        }

        .answer-btn.wrong {
            background-color: var(--error-color);
            color: white;
        }

        .reset-btn {
            padding: 15px 25px;
            background-color: #8e8e93;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 150px;
        }

        .reset-btn:hover {
            background-color: #7d7d82;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }

        .reset-btn:active {
            transform: translateY(0);
        }

        /* Статистика */
        .stats-panel {
            background-color: white;
            padding: var(--spacing);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-top: var(--spacing);
            border: 1px solid var(--primary-light);
        }

        .score-display {
            display: flex;
            justify-content: space-around;
            margin-bottom: var(--spacing);
            flex-wrap: wrap;
            gap: 15px;
        }

        .score-item {
            text-align: center;
            background-color: #f8f9fa;
            padding: 15px 20px;
            border-radius: 12px;
            min-width: 200px;
            border: 1px solid #e5e5e5;
        }

        .score-item span:first-child {
            font-weight: bold;
            margin-right: 5px;
            display: block;
            margin-bottom: 5px;
            color: var(--header-color);
        }

        .score-item span:last-child {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .detailed-stats {
            border-top: 1px solid #e5e5e5;
            padding-top: 20px;
            max-height: 250px;
            overflow-y: auto;
        }

        .letter-stat {
            display: flex;
            justify-content: space-between;
            padding: 10px 15px;
            margin-bottom: 8px;
            border-radius: 8px;
            background-color: #f9f9f9;
        }

        .letter-stat:nth-child(even) {
            background-color: #f0f0f0;
        }

        .letter-stat span:first-child {
            font-weight: bold;
            font-size: 18px;
            color: var(--header-color);
        }

        /* Шапка с настройками */
        .header-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 25px;
            position: relative;
            width: 100%;
        }

        .toggle-settings-btn {
            position: absolute;
            right: 0;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 22px;
            color: var(--primary-color);
            z-index: 10;
            transition: transform 0.3s;
        }

        .toggle-settings-btn:hover {
            color: var(--primary-dark);
            transform: scale(1.1);
        }

        .settings-collapsed {
            display: none;
        }

        /* Настройки игры - часть 2 */
        .mode-settings-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-bottom: 15px;
        }

        /* Чекбокс стилизация */
        input[type="checkbox"] {
            appearance: none;
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border: 2px solid var(--primary-color);
            border-radius: 6px;
            outline: none;
            cursor: pointer;
            position: relative;
        }

        input[type="checkbox"]:checked {
            background-color: var(--primary-color);
        }

        input[type="checkbox"]:checked::after {
            content: "✓";
            color: white;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 16px;
        }

        /* Адаптивность */
        @media (max-width: 768px) {
            .game-settings {
                flex-direction: column;
                align-items: flex-start;
            }

            .mode-selector,
            .hide-images {
                width: 100%;
            }

            .hide-images,
            .mute-sounds {
                margin-bottom: 10px;
                width: auto;
            }

            .game-area {
                padding: 15px;
            }

            .score-display {
                flex-direction: column;
                align-items: center;
            }

            .score-item {
                width: 100%;
            }

            .mode-settings-container {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
                width: 100%;
            }

            .mode-settings-container .toggle-buttons {
                width: 100%;
                margin-bottom: 10px;
            }

            .mode-settings-container .letters-goal {
                width: 100%;
                justify-content: space-between;
            }
        }

        @media (max-width: 480px) {
            .header-container {
                justify-content: space-between;
            }

            .toggle-buttons {
                flex-direction: column;
                width: 100%;
            }

            .toggle-buttons button {
                width: 100%;
                margin-bottom: 5px;
            }

            .hide-images,
            .mute-sounds {
                width: 100%;
                justify-content: space-between;
            }

            .word-length-selector .toggle-buttons {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }

            .word-length-selector .toggle-buttons button {
                margin-bottom: 0;
            }

            .answer-controls {
                flex-direction: column;
            }

            .answer-btn,
            .reset-btn {
                width: 100%;
                margin-bottom: 10px;
            }


            #current-letter {
                font-size: 28px;
                padding: 10px 18px;
            }

            .timer-controls {
                flex-wrap: wrap;
            }

            .timer-controls .btn {
                flex: 1;
                min-width: 100px;
            }

            .mode-settings-container {
                padding: 0;
            }

            .mode-settings-container .letters-goal label {
                font-size: 14px;
                flex: 1;
            }

            .mode-settings-container .letters-goal input {
                width: 60px;
            }

            #game-settings-2 label {
                margin-bottom: 10px;
                display: block;
            }
        }
    </style>

    <title>Учим алфавит - обучающая игра для детей</title>
    <meta name="description"
        content="Интерактивная образовательная игра для изучения русского алфавита, слогов и простых слов. Развивающее приложение для детей дошкольного и младшего школьного возраста.">
    <meta name="keywords"
        content="учить алфавит, русский алфавит, буквы для детей, обучение чтению, слоги, детская игра, развивающие игры, дошкольное образование">

    <!-- Open Graph метатеги для соцсетей -->
    <meta property="og:title" content="Учим алфавит - интерактивная игра для детей">
    <meta property="og:description"
        content="Обучающая игра для изучения букв, слогов и простых слов русского языка с разными режимами для детей разного возраста.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://developandbehappy.github.io/Teaching-a-child/">
    <meta property="og:image" content="https://developandbehappy.github.io/Teaching-a-child/icons/512.webp">

    <!-- Twitter Card метатеги -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Учим алфавит - интерактивная игра для детей">
    <meta name="twitter:description" content="Развивающая игра для изучения русского алфавита, слогов и чтения.">
    <meta name="twitter:image" content="https://developandbehappy.github.io/Teaching-a-child/icons/512.webp">

    <!-- Метатеги для Яндекса -->
    <meta name="yandex-verification" content="ваш-код-верификации">
    <meta property="ya:ovs:allow_embed" content="true">

    <!-- Метатеги для Google -->
    <meta name="google-site-verification" content="ваш-код-верификации">
    <meta name="robots" content="index, follow">
    <meta name="author" content="Ваше имя или название организации">
    <meta name="application-name" content="Учим алфавит">

    <!-- Канонический URL -->
    <link rel="canonical" href="https://developandbehappy.github.io/Teaching-a-child/">

    <!-- Языковые метатеги -->
    <meta http-equiv="content-language" content="ru-RU">

</head>

<body>
    <div class="container">
        <div class="header-container">
            <h1>Учим алфавит</h1>
            <button id="toggle-settings-btn" class="toggle-settings-btn">
                Скрыть ⚙️
            </button>
        </div>

        <div id="game-settings-1" class="game-settings panel">
            <div class="mode-selector">
                <label>Режим игры:</label>
                <div class="toggle-buttons-container">
                    <div class="toggle-buttons">
                        <button id="letters-mode" class="btn btn-secondary active">Буквы</button>
                        <button id="pairs-mode" class="btn btn-secondary">Пары</button>
                        <button id="words-mode" class="btn btn-secondary">Слова</button>
                        <button id="alphabet-mode" class="btn btn-secondary">Алфавит</button>
                    </div>
                    <div id="word-length-selector" class="word-length-selector hide">
                        <label>Длина слов:</label>
                        <div class="toggle-buttons">
                            <button id="words3-length" class="btn btn-secondary active">3 буквы</button>
                            <button id="words4-length" class="btn btn-secondary">4 буквы</button>
                            <button id="words5-length" class="btn btn-secondary">5 букв</button>
                            <button id="words6-length" class="btn btn-secondary">6 букв</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="hide-images">
                <label for="hide-images-toggle">Скрыть изображения:</label>
                <input type="checkbox" id="hide-images-toggle">
            </div>
            <div class="mute-sounds">
                <label for="mute-sounds-toggle">Отключить звук:</label>
                <input type="checkbox" id="mute-sounds-toggle">
            </div>
        </div>

        <div class="game-area panel">
            <div id="game-settings-2" class="mode-selector">
                <label>Режим игры:</label>
                <div class="mode-settings-container">
                    <div class="toggle-buttons">
                        <button id="time-mode" class="btn btn-secondary active">На время</button>
                        <button id="count-mode" class="btn btn-secondary">Определенное кол-во</button>
                    </div>
                    <div class="letters-goal" id="letters-limites">
                        <label for="letters-limit">Количество букв:</label>
                        <input type="number" id="letters-limit" min="5" max="500" value="30">
                    </div>
                    <div class="letters-goal active" id="time-limits">
                        <label for="time-limit">Время занятия (мин):</label>
                        <input type="number" id="time-limit" min="1" max="120" value="30">
                    </div>
                </div>
            </div>

            <div class="current-target">
                <h2><span id="current-letter">А</span></h2>
            </div>

            <div class="timer-container" id="timer-container">
                <div class="timer-bar">
                    <div id="timer-progress"></div>
                </div>
                <div class="timer-display" id="timer-display"></div>
                <div class="timer-controls">
                    <button id="start-timer" class="btn btn-primary">Старт</button>
                    <button id="pause-timer" class="btn btn-secondary">Пауза</button>
                    <button id="reset-timer" class="btn btn-secondary">Сброс</button>
                </div>
            </div>

            <div id="letters-progress-container" class="progress-container hide">
                <div id="letters-count">0 / 30 букв</div>
                <div class="count-bar">
                    <div id="count-progress"></div>
                </div>
            </div>

            <div class="image-panels" id="image-container">
                <!-- Изображения будут добавлены динамически -->
            </div>

            <div class="answer-controls">
                <button id="correct-answer" class="answer-btn correct">Правильно</button>
                <button id="wrong-answer" class="answer-btn wrong">Неправильно</button>
                <button id="reset-game" class="reset-btn">Сбросить игру</button>
            </div>
        </div>

        <div class="stats-panel panel">
            <h3>Статистика</h3>
            <div class="score-display">
                <div class="score-item">
                    <span>Правильно:</span>
                    <span id="correct-count">0</span>
                </div>
                <div class="score-item">
                    <span>Неправильно:</span>
                    <span id="wrong-count">0</span>
                </div>
                <div class="score-item">
                    <span>Всего правильных:</span>
                    <span id="total-correct">0</span>
                </div>
            </div>

            <div class="detailed-stats" id="detailed-stats"></div>
        </div>
    </div>

    <script>
        const CONFIG = {
            // Наборы букв и слогов
            letters: ['А', 'Б', 'В', 'Г', 'Д', 'Е', 'Ё', 'Ж', 'З', 'И', 'Й', 'К', 'Л', 'М', 'Н', 'О', 'П', 'Р', 'С', 'Т', 'У', 'Ф', 'Х', 'Ц', 'Ч', 'Ш', 'Щ', 'Ъ', 'Ы', 'Ь', 'Э', 'Ю', 'Я'],
            pairs: [
                // Слоги с гласными буквами
                "ба", "ва", "га", "да", "жа", "за", "ка", "ла", "ма", "на",
                "па", "ра", "са", "та", "фа", "ха", "ца", "ча", "ша", "ща",

                "бо", "во", "го", "до", "жо", "зо", "ко", "ло", "мо", "но",
                "по", "ро", "со", "то", "фо", "хо", "цо", "чо", "шо", "що",

                "бе", "ве", "ге", "де", "же", "зе", "ке", "ле", "ме", "не",
                "пе", "ре", "се", "те", "фе", "хе", "це", "че", "ше", "ще",

                "би", "ви", "ги", "ди", "жи", "зи", "ки", "ли", "ми", "ни",
                "пи", "ри", "си", "ти", "фи", "хи", "ци", "чи", "ши", "щи",

                "бу", "ву", "гу", "ду", "жу", "зу", "ку", "лу", "му", "ну",
                "пу", "ру", "су", "ту", "фу", "ху", "цу", "чу", "шу", "щу",

                "бы", "вы", "гы", "ды", "жы", "зы", "кы", "лы", "мы", "ны",
                "пы", "ры", "сы", "ты", "фы", "хы", "цы", "чы", "шы", "щы",

                "бэ", "вэ", "гэ", "дэ", "жэ", "зэ", "кэ", "лэ", "мэ", "нэ",
                "пэ", "рэ", "сэ", "тэ", "фэ", "хэ", "цэ", "чэ", "шэ", "щэ",

                "бю", "вю", "гю", "дю", "жю", "зю", "кю", "лю", "мю", "ню",
                "пю", "рю", "сю", "тю", "фю", "хю", "цю", "чю", "шю", "щю",

                "бя", "вя", "гя", "дя", "жя", "зя", "кя", "ля", "мя", "ня",
                "пя", "ря", "ся", "тя", "фя", "хя", "ця", "чя", "шя", "щя",

                "бь", "вь", "гь", "дь", "жь", "зь", "кь", "ль", "мь", "нь",
                "пь", "рь", "сь", "ть", "фь", "хь", "ць", "чь", "шь", "щь",

                "бъ", "въ", "гъ", "дъ", "жъ", "зъ", "къ", "лъ", "мъ", "нъ",
                "пъ", "ръ", "съ", "тъ", "фъ", "хъ", "цъ", "чъ", "шъ", "щъ",

                // Слоги с согласными буквами
                "аб", "ав", "аг", "ад", "аж", "аз", "ак", "ал", "ам", "ан", "ап", "ар", "ас", "ат", "аф", "ах", "ац", "ач", "аш", "ащ",
                "об", "ов", "ог", "од", "ож", "оз", "ок", "ол", "ом", "он", "оп", "ор", "ос", "от", "оф", "ох", "оц", "оч", "ош", "ощ",
                "еб", "ев", "ег", "ед", "еж", "ез", "ек", "ел", "ем", "ен", "еп", "ер", "ес", "ет", "еф", "ех", "ец", "еч", "еш", "ещ",
                "иб", "ив", "иг", "ид", "иж", "из", "ик", "ил", "им", "ин", "ип", "ир", "ис", "ит", "иф", "их", "иц", "ич", "иш", "ищ",
                "уб", "ув", "уг", "уд", "уж", "уз", "ук", "ул", "ум", "ун", "уп", "ур", "ус", "ут", "уф", "ух", "уц", "уч", "уш", "ущ",
                "ыб", "ыв", "ыг", "ыд", "ыж", "ыз", "ык", "ыл", "ым", "ын", "ып", "ыр", "ыс", "ыт", "ыф", "ых", "ыц", "ыч", "ыш", "ыщ",
                "эб", "эв", "эг", "эд", "эж", "эз", "эк", "эл", "эм", "эн", "эп", "эр", "эс", "эт", "эф", "эх", "эц", "эч", "эш", "эщ",
                "юб", "юв", "юг", "юд", "юж", "юз", "юк", "юл", "юм", "юн", "юп", "юр", "юс", "ют", "юф", "юх", "юц", "юч", "юш", "ющ",
                "яб", "яв", "яг", "яд", "яж", "яз", "як", "ял", "ям", "ян", "яп", "яр", "яс", "ят", "яф", "ях", "яц", "яч", "яш", "ящ",
                
                // Дополнительные согласные слоги с ё
                "ёб", "ёв", "ёг", "ёд", "ёж", "ёз", "ёк", "ёл", "ём", "ён", "ёп", "ёр", "ёс", "ёт", "ёф", "ёх", "ёц", "ёч", "ёш", "ёщ",
                
                // Слоги с мягким и твёрдым знаками в качестве окончания
                "ьб", "ьв", "ьг", "ьд", "ьж", "ьз", "ьк", "ьл", "ьм", "ьн", "ьп", "ьр", "ьс", "ьт", "ьф", "ьх", "ьц", "ьч", "ьш", "ьщ",
                "ъб", "ъв", "ъг", "ъд", "ъж", "ъз", "ък", "ъл", "ъм", "ън", "ъп", "ър", "ъс", "ът", "ъф", "ъх", "ъц", "ъч", "ъш", "ъщ",
                
                // Парные слоги с согласными (согласная + согласная)
                "бл", "бр", "вл", "вр", "гл", "гр", "дл", "др", "жл", "жр", "зл", "зр", "кл", "кр", "мл", "мр", "пл", "пр", "сл", "ср", "тл", "тр", "фл", "фр", "хл", "хр", "цл", "цр", "чл", "чр", "шл", "шр", "щл", "щр",
                "бн", "вн", "гн", "дн", "жн", "зн", "кн", "мн", "пн", "сн", "тн", "фн", "хн", "цн", "чн", "шн", "щн",
                "бм", "вм", "гм", "дм", "жм", "зм", "км", "лм", "нм", "рм", "см", "тм", "фм", "хм", "цм", "чм", "шм", "щм",
                "бт", "вт", "гт", "дт", "жт", "зт", "кт", "лт", "мт", "нт", "рт", "ст", "фт", "хт", "цт", "чт", "шт", "щт",
                "бз", "вз", "гз", "дз", "кз", "лз", "мз", "нз", "рз", "сз", "тз", "фз", "хз", "цз", "чз", "шз", "щз",
                "бк", "вк", "гк", "дк", "жк", "зк", "лк", "мк", "нк", "рк", "ск", "тк", "фк", "хк", "цк", "чк", "шк", "щк",
                "бп", "вп", "гп", "дп", "жп", "зп", "кп", "лп", "мп", "нп", "рп", "сп", "тп", "фп", "хп", "цп", "чп", "шп", "щп",
                "бс", "вс", "гс", "дс", "жс", "зс", "кс", "лс", "мс", "нс", "рс", "тс", "фс", "хс", "цс", "чс", "шс", "щс",
                "бж", "вж", "гж", "дж", "зж", "кж", "лж", "мж", "нж", "рж", "сж", "тж", "фж", "хж", "цж", "чж", "шж",
                "бщ", "вщ", "гщ", "дщ", "жщ", "зщ", "кщ", "лщ", "мщ", "нщ", "рщ", "сщ", "тщ", "фщ", "хщ", "цщ", "чщ", "шщ",
                "бч", "вч", "гч", "дч", "жч", "зч", "кч", "лч", "мч", "нч", "рч", "сч", "тч", "фч", "хч", "цч", "шч", "щч",
                "бц", "вц", "гц", "дц", "жц", "зц", "кц", "лц", "мц", "нц", "рц", "сц", "тц", "фц", "хц", "чц", "шц", "щц",
                "бх", "вх", "гх", "дх", "жх", "зх", "кх", "лх", "мх", "нх", "рх", "сх", "тх", "фх", "цх", "чх", "шх", "щх",
                "бф", "вф", "гф", "дф", "жф", "зф", "кф", "лф", "мф", "нф", "рф", "сф", "тф", "хф", "цф", "чф", "шф", "щф"
            ],
            words3: [
                "дом", "кот", "сок", "рот", "нос", "лес", "пол", "сыр", "мир", "суп",
                "мяч", "рак", "сын", "шар", "мел", "бык", "дым", "лук", "мех", "зуб",
                "час", "жук", "бег", "мак", "сад", "шум", "пар", "лед", "кит", "год",
                "мёд", "сон", "век", "зал", "рис", "бор", "пух", "май", "лев", "куб",
                "эхо", "оса", "ток", "шаг", "том", "фен", "тир", "пир", "щит", "боб"
            ],
            words4: [
                "стол", "окно", "река", "рука", "нога", "снег", "хлеб", "лист", "мама", "папа",
                "дети", "лиса", "волк", "кино", "небо", "гора", "море", "рыба",
                "утро", "лето", "зима", "весна", "пища", "день", "ночь", "друг", "игра", "цвет",
                "метр", "луна", "тень", "дочь", "брат", "обед", "буря", "поле", "печь", "роза",
                "пена", "язык", "стул", "плащ", "сила", "трус", "куст", "плод", "база", "клад"
            ],
            words5: [
                "школа", "ручка", "карта", "щенок", "зайка", "кошка", "месяц", "ложка", "вилка",
                "слива", "ветер", "доска", "птица", "рыбак", "груша", "стена", "песок", "фильм", "пирог", "комар",
                "сосна", "кабан", "овраг", "земля", "цифра", "ягода", "город", "плита", "сумка", "дверь",
                "ветка", "вечер", "жираф", "арбуз", "дождь", "олень", "сахар", "ковёр", "поезд", "почта", "тропа"
            ],
            words6: [
                "собака", "корова", "машина", "бабочка", "солнце", "облако", "деревня", "огурец", "комната", "одежда",
                "пальто", "девица", "тетрадь", "учитель", "яблоня", "персик", "ананас", "картина", "дорога", "молоко",
                "колесо", "варежка", "мебель", "телефон", "камень", "голова", "письмо", "дружба", "аптека", "лампа",
                "журнал", "клубок", "коньки", "музыка", "огород", "погода", "работа", "сапоги", "стакан", "тарелка",
                "футбол", "чашка", "малина", "сирень", "компот", "семена", "глобус", "корабль", "барабан", "посуда"
            ],
            linksImage: {
                "а": "0 0",
                "б": "-120px 0",
                "в": "-240px 0",
                "г": "-340px 0",
                "д": "-460px 0",
                "е": "-580px 0",
                "ё": "-700px 0",
                "ж": "-795px 0",
                "з": "-5px -130px",
                "и": "-115px -130px",
                "й": "-225px -380px",
                "к": "-235px -130px",
                "л": "555px -130px",
                "м": "-455px -130px",
                "н": "335px -130px",
                "о": "225px -130px",
                "п": "105px -130px",
                "р": "-5px -250px",
                "с": "-115px -250px",
                "т": "-225px -250px",
                "у": "-335px -250px",
                "ф": "-455px -250px",
                "х": "-325px -380px",
                "ц": "-425px -380px",
                "ч": "-555px -250px",
                "ш": "-665px -250px",
                "щ": "-525px -380px",
                "ъ": "-705px -383px",
                "ы": "-785px -383px",
                "ь": "-620px -383px",
                "э": "-785px -263px",
                "ю": "-5px -375px",
                "я": "-115px -375px"
            },
            timerDuration: 60 * 30 // 30 минут в секундах
        };

        // Состояние приложения
        let gameMode = 'letters'; // 'letters', 'pairs' или 'words'
        let wordLength = 3; // Длина слов (3, 4, 5 или 6 букв)
        let hideImages = false;
        let timerInterval;
        let timerDuration = CONFIG.timerDuration;
        let timeLeft = timerDuration;
        let isTimerRunning = false;
        let muteSounds = false;
        let statistics = {
            correct: 0,
            wrong: 0,
            details: {} // Детальная статистика по буквам/слогам/словам
        };
        let currentTarget = CONFIG.letters[0];
        let lettersLimit = 30;
        let lettersLearned = 0;
        let isCountMode = false;

        // Инициализация приложения
        document.addEventListener('DOMContentLoaded', function () {
            // Инициализация элементов интерфейса
            const lettersLimitInput = document.getElementById('letters-limit');
            const timeLimitInput = document.getElementById('time-limit');
            const lettersProgressContainer = document.getElementById('letters-progress-container');
            const toggleSettingsBtn = document.getElementById('toggle-settings-btn');
            const gameSettings1 = document.getElementById('game-settings-1');
            const gameSettings2 = document.getElementById('game-settings-2');

            lettersLimit = parseInt(lettersLimitInput.value) || 30;

            // Установка начальной продолжительности таймера из поля ввода
            const initialTimeLimit = parseInt(timeLimitInput.value) || 30;
            timerDuration = initialTimeLimit * 60; // Перевод минут в секунды
            timeLeft = timerDuration;

            // Обработчик изменения времени
            timeLimitInput.addEventListener('change', function () {
                const newTimeLimit = parseInt(this.value) || 30;
                timerDuration = newTimeLimit * 60; // Перевод минут в секунды
                resetTimer();
            });

            toggleSettingsBtn.addEventListener('click', function () {
                gameSettings1.classList.toggle('settings-collapsed');
                gameSettings2.classList.toggle('settings-collapsed');

                // Меняем иконку в зависимости от состояния
                if (gameSettings1.classList.contains('settings-collapsed')) {

                    toggleSettingsBtn.textContent = 'Показать ⚙️';
                } else {
                    toggleSettingsBtn.textContent = 'Скрыть ⚙️';

                }
            });

            // Настройка переключателей режима игры
            document.getElementById('letters-mode').addEventListener('click', () => switchMode('letters'));
            document.getElementById('pairs-mode').addEventListener('click', () => switchMode('pairs'));
            document.getElementById('words-mode').addEventListener('click', () => switchMode('words'));
            document.getElementById('alphabet-mode').addEventListener('click', () => switchMode('alphabet'));

            // Настройка переключателей длины слов
            document.getElementById('words3-length').addEventListener('click', () => switchWordLength(3));
            document.getElementById('words4-length').addEventListener('click', () => switchWordLength(4));
            document.getElementById('words5-length').addEventListener('click', () => switchWordLength(5));
            document.getElementById('words6-length').addEventListener('click', () => switchWordLength(6));

            // Настройка переключателей режима таймера/счетчика
            document.getElementById('time-mode').addEventListener('click', () => {
                isCountMode = false;
                document.getElementById('time-mode').classList.add('active');
                document.getElementById('count-mode').classList.remove('active');
                document.getElementById('letters-limites').classList.remove('active');
                document.getElementById('timer-container').classList.remove('hide');
                document.getElementById('time-limits').classList.add('active');
                document.getElementById('letters-progress-container').classList.add('hide');
                resetTimer();
                updateLettersProgress();
            });

            document.getElementById('count-mode').addEventListener('click', () => {
                isCountMode = true;
                document.getElementById('time-mode').classList.remove('active');
                document.getElementById('count-mode').classList.add('active');
                document.getElementById('letters-limites').classList.add('active');
                document.getElementById('timer-container').classList.add('hide');
                document.getElementById('time-limits').classList.remove('active');
                document.getElementById('letters-progress-container').classList.remove('hide');
                lettersLearned = 0;
                resetTimer();
                updateLettersProgress();
            });

            // Настройка ввода лимита букв
            lettersLimitInput.addEventListener('change', function () {
                lettersLimit = parseInt(this.value) || 30;
                updateLettersProgress();
            });


            // Переключатель скрытия изображений
            document.getElementById('hide-images-toggle').addEventListener('change', toggleHideImages);
            document.getElementById('mute-sounds-toggle').addEventListener('change', function () {
                muteSounds = this.checked;
            });


            // Кнопки таймера
            document.getElementById('start-timer').addEventListener('click', startTimer);
            document.getElementById('pause-timer').addEventListener('click', pauseTimer);
            document.getElementById('reset-timer').addEventListener('click', resetTimer);

            // Кнопки ответов
            document.getElementById('correct-answer').addEventListener('click', recordCorrectAnswer);
            document.getElementById('wrong-answer').addEventListener('click', recordWrongAnswer);
            document.getElementById('reset-game').addEventListener('click', resetGame);

            // Инициализация игры
            initializeGame();
        });

        // Инициализация игры
        function initializeGame() {
            resetStatistics();
            updateStatisticsDisplay();
            setNewTarget();
            createImagePanels();
            showTime();
            updateLettersProgress();
        }

        // Переключение режима игры (буквы/пары)
        function switchMode(mode) {
            gameMode = mode;

            // Обновление визуального состояния кнопок
            document.getElementById('alphabet-mode').classList.toggle('active', mode === 'alphabet');
            document.getElementById('letters-mode').classList.toggle('active', mode === 'letters');
            document.getElementById('pairs-mode').classList.toggle('active', mode === 'pairs');
            document.getElementById('words-mode').classList.toggle('active', mode === 'words');

            // Показать или скрыть селектор длины слов
            const wordLengthSelector = document.getElementById('word-length-selector');
            wordLengthSelector.style.display = mode === 'words' ? 'block' : 'none';

            // Управление отображением блоков для режима "Алфавит"
            const currentTargetBlock = document.querySelector('.current-target');
            const gameSettings2Block = document.getElementById('game-settings-2');
            const answerControlsBlock = document.querySelector('.answer-controls');
            const timerContainer = document.getElementById('timer-container');
            const lettersProgressContainer = document.getElementById('letters-progress-container');

            if (mode === 'alphabet') {
                // Скрываем блоки для режима "Алфавит"
                currentTargetBlock.style.display = 'none';
                gameSettings2Block.style.display = 'none';
                answerControlsBlock.style.display = 'none';
                timerContainer.style.display = 'none';
                lettersProgressContainer.style.display = 'none';
                // Отображаем все буквы алфавита
                createAlphabetPanels();
            } else {
                // Возвращаем видимость блоков для других режимов
                currentTargetBlock.style.display = '';
                gameSettings2Block.style.display = '';
                answerControlsBlock.style.display = '';
                timerContainer.style.display = '';
                lettersProgressContainer.style.display = '';


                createImagePanels();
            }

            resetGame();
        }

        function createAlphabetPanels() {
            const container = document.getElementById('image-container');
            container.innerHTML = '';
            container.classList.add("alpabet");
            // Создаем панель для каждой буквы алфавита
            CONFIG.letters.forEach(letter => {
                const currentChar = letter.toLowerCase();

                const panel = document.createElement('div');
                panel.className = 'image-panel';
                panel.classList.toggle('hidden', hideImages);

                const img = document.createElement('div');
                img.className = 'image-word';
                img.style.background = `url("./images/alpa.webp")`;

                if (CONFIG.linksImage[currentChar]) {
                    img.style.backgroundPosition = CONFIG.linksImage[currentChar];
                }

                panel.appendChild(img);
                container.appendChild(panel);

                // Обработчик клика для воспроизведения звука буквы
                panel.addEventListener('click', () => playLetterSound(currentChar));
            });
        }


        // Переключение длины слов
        function switchWordLength(length) {
            wordLength = length;

            // Обновление визуального состояния кнопок
            document.getElementById('words3-length').classList.toggle('active', length === 3);
            document.getElementById('words4-length').classList.toggle('active', length === 4);
            document.getElementById('words5-length').classList.toggle('active', length === 5);
            document.getElementById('words6-length').classList.toggle('active', length === 6);

            resetGame();
        }

        // Переключение скрытия изображений
        function toggleHideImages() {
            hideImages = document.getElementById('hide-images-toggle').checked;

            // Обновление отображения изображений
            const panels = document.querySelectorAll('.image-panel');
            panels.forEach(panel => {
                panel.classList.toggle('hidden', hideImages);
            });
        }

        // Создание панелей с изображениями
        function createImagePanels() {
            const container = document.getElementById('image-container');
            const currentLetterElement = document.getElementById('current-letter');
            const currentLetter = currentLetterElement.textContent.replace(/-/g, ''); // Убираем дефисы из текущей буквы
            container.classList.remove("alpabet");

            container.innerHTML = '';

            // Создаем панели для каждой буквы в текущей цели
            for (let i = 0; i < currentLetter.length; i++) {
                const currentChar = currentLetter[i].toLowerCase();

                const panel = document.createElement('div');
                panel.className = 'image-panel';
                panel.classList.toggle('hidden', hideImages);

                const img = document.createElement('div');
                img.className = 'image-word';
                img.style.background = `url("./images/alpa.webp")`;

                if (CONFIG.linksImage[currentChar]) {
                    img.style.backgroundPosition = CONFIG.linksImage[currentChar];
                }

                panel.appendChild(img);
                container.appendChild(panel);

                // Обработчик клика по изображению
                panel.addEventListener('click', () => handleImageClick(panel, i));
            }
        }

        // Функция для обработки клика по изображению
        function handleImageClick(panel, index) {
            const currentLetterElement = document.getElementById('current-letter');
            const currentLetter = currentLetterElement.textContent.replace(/-/g, '');

            // Буква для воспроизведения (с учетом индекса в слове/слоге)
            const letterToPlay = currentLetter[index]?.toLowerCase() || '';

            if (letterToPlay) {
                playLetterSound(letterToPlay);
            }
        }

        // Функция для воспроизведения звука буквы
        function playLetterSound(letter) {
            if (muteSounds) return;
            // Предзагрузка аудио для iOS Safari
            let audioElement;

            // Получаем или создаем аудио элемент
            if (!window.audioCache) {
                window.audioCache = {};
            }

            if (!window.audioCache[letter]) {
                audioElement = new Audio();

                // URL для аудиофайла (предполагается формат mp3)
                const audioUrl = `./audio/${letter}.m4a`;

                // Проверка поддержки разных форматов
                if (audioElement.canPlayType('audio/mpeg')) {
                    audioElement.src = audioUrl;
                } else if (audioElement.canPlayType('audio/ogg')) {
                    audioElement.src = `https://example.com/sounds/${letter}.ogg`;
                } else {
                    audioElement.src = audioUrl; // Используем mp3 как запасной вариант
                }

                // Кэшируем созданный элемент
                window.audioCache[letter] = audioElement;

                // Предзагрузка для iOS Safari
                audioElement.load();
            } else {
                audioElement = window.audioCache[letter];
            }

            // Сбрасываем время воспроизведения для повторного проигрывания
            audioElement.currentTime = 0;

            // Обработка ошибок воспроизведения
            const playPromise = audioElement.play();

            if (playPromise !== undefined) {
                playPromise.catch(error => {
                    console.error('Ошибка воспроизведения аудио:', error);

                    // Пробуем воспроизвести звук после взаимодействия пользователя (для iOS)
                    const resumeAudio = function () {
                        audioElement.play();
                        document.removeEventListener('touchstart', resumeAudio);
                    };
                    document.addEventListener('touchstart', resumeAudio, { once: true });
                });
            }
        }

        // Установка новой цели (буквы или слога)
        function setNewTarget() {
            let targets;

            if (gameMode === 'letters') {
                targets = CONFIG.letters;
            } else if (gameMode === 'pairs') {
                targets = CONFIG.pairs;
            } else if (gameMode === 'words') {
                // Выбираем список слов соответствующей длины
                switch (wordLength) {
                    case 3: targets = CONFIG.words3; break;
                    case 4: targets = CONFIG.words4; break;
                    case 5: targets = CONFIG.words5; break;
                    case 6: targets = CONFIG.words6; break;
                    default: targets = CONFIG.words3;
                }
            }

            const randomIndex = Math.floor(Math.random() * targets.length);
            currentTarget = targets[randomIndex];

            document.getElementById('current-letter').textContent = splitIntoSyllables(currentTarget).join('-');
        }

        // Запись правильного ответа
        function recordCorrectAnswer() {
            statistics.correct++;
            if (isCountMode) lettersLearned++;

            if (!statistics.details[currentTarget]) {
                statistics.details[currentTarget] = { correct: 0, wrong: 0 };
            }
            statistics.details[currentTarget].correct++;

            updateLettersProgress();
            updateStatisticsDisplay();

            // Проверка на достижение лимита букв в режиме счета
            if (isCountMode && lettersLearned >= lettersLimit) {
                alert(`Отлично поработали, теперь можно отдохнуть`);
                resetGame();
                return;
            }

            setNewTarget();
            createImagePanels();
        }

        // Запись неправильного ответа
        function recordWrongAnswer() {
            statistics.wrong++;

            if (!statistics.details[currentTarget]) {
                statistics.details[currentTarget] = { correct: 0, wrong: 0 };
            }
            statistics.details[currentTarget].wrong++;

            updateStatisticsDisplay();
            setNewTarget();
            createImagePanels();
        }

        // Обновление отображения статистики
        function updateStatisticsDisplay() {
            document.getElementById('correct-count').textContent = statistics.correct;
            document.getElementById('wrong-count').textContent = statistics.wrong;
            document.getElementById('total-correct').textContent = statistics.correct;

            // Обновление детальной статистики
            const detailedStats = document.getElementById('detailed-stats');
            detailedStats.innerHTML = '';

            for (const [target, stats] of Object.entries(statistics.details)) {
                const statItem = document.createElement('div');
                statItem.className = 'letter-stat';
                statItem.innerHTML = `
                <span>${target}</span>
                <span>Правильно: ${stats.correct}, Неправильно: ${stats.wrong}</span>
            `;
                detailedStats.appendChild(statItem);
            }
        }

        // Обновление прогресса букв
        function updateLettersProgress() {
            const progressPercentage = (lettersLearned / lettersLimit) * 100;
            document.getElementById('count-progress').style.width = progressPercentage + '%';
            document.getElementById('letters-count').textContent = lettersLearned + ' / ' + lettersLimit + ' букв';
        }

        // Сброс статистики
        function resetStatistics() {
            statistics = {
                correct: 0,
                wrong: 0,
                details: {}
            };
            lettersLearned = 0;
        }

        // Запуск таймера
        function startTimer() {
            if (!isTimerRunning) {
                isTimerRunning = true;
                timerInterval = setInterval(updateTimer, 1000);
            }
        }

        // Пауза таймера
        function pauseTimer() {
            isTimerRunning = false;
            clearInterval(timerInterval);
        }

        // Обновление таймера
        function updateTimer() {
            if (timeLeft > 0) {
                timeLeft--;
                const progressPercentage = (timeLeft / timerDuration) * 100;
                document.getElementById('timer-progress').style.width = `${progressPercentage}%`;

                showTime();

                // Изменение цвета таймера при приближении к концу
                if (progressPercentage < 20) {
                    document.getElementById('timer-progress').style.backgroundColor = '#e74c3c';
                } else if (progressPercentage < 50) {
                    document.getElementById('timer-progress').style.backgroundColor = '#f39c12';
                } else {
                    document.getElementById('timer-progress').style.backgroundColor = '#2ecc71';
                }
            } else {
                // Время вышло
                pauseTimer();
                alert('Время вышло! Игра завершена.');
                resetGame();
            }
        }

        // Отображение времени
        function showTime() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timer-display').textContent =
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // Сброс таймера
        function resetTimer() {
            pauseTimer();
            timeLeft = timerDuration;
            document.getElementById('timer-progress').style.width = '100%';
            document.getElementById('timer-progress').style.backgroundColor = '#2ecc71';
            showTime();
        }

        function splitIntoSyllables(word) {
            // Проверка на пустую строку или не-строку
            if (!word || typeof word !== 'string') {
                return [];
            }

            // Приводим к нижнему регистру и удаляем пробелы
            word = word.toLowerCase().trim();

            // Проверка на однобуквенное слово
            if (word.length === 1) {
                return [word];
            }

            // Гласные буквы русского языка
            const vowels = 'аеёиоуыэюя';

            // Находим все гласные в слове
            const vowelPositions = [];
            for (let i = 0; i < word.length; i++) {
                if (vowels.includes(word[i])) {
                    vowelPositions.push(i);
                }
            }

            // Если гласных нет или только одна гласная, возвращаем слово как один слог
            if (vowelPositions.length <= 1) {
                return [word];
            }

            // Сонорные согласные (непарные звонкие)
            const sonors = 'йлмнр';

            // Результат - массив слогов
            const syllables = [];
            let startPos = 0;

            // Обработка слогов
            for (let i = 0; i < vowelPositions.length - 1; i++) {
                const vowelPos = vowelPositions[i];
                const nextVowelPos = vowelPositions[i + 1];

                // Определяем границу слога
                let endPos = vowelPos + 1; // По умолчанию граница сразу после гласной

                // Проверяем, есть ли согласные между гласными
                if (nextVowelPos - vowelPos > 1) {
                    // Количество согласных между гласными
                    const consonantsCount = nextVowelPos - vowelPos - 1;

                    // Применяем правила слогоделения
                    if (consonantsCount === 1) {
                        // Одна согласная между гласными - относится к следующему слогу
                        endPos = vowelPos + 1;
                    } else if (consonantsCount === 2) {
                        // Две согласные между гласными
                        // Проверяем, является ли первая согласная сонорной
                        if (sonors.includes(word[vowelPos + 1])) {
                            // Если первая согласная сонорная, а вторая шумная, граница между ними
                            endPos = vowelPos + 2;
                        } else {
                            // Иначе обе согласные отходят к следующему слогу
                            endPos = vowelPos + 1;
                        }
                    } else if (consonantsCount >= 3) {
                        // При трех и более согласных между гласными
                        // Обычно первые согласные отходят к предыдущему слогу, а последняя к следующему
                        endPos = nextVowelPos - 1;
                    }
                }

                // Добавляем слог
                syllables.push(word.substring(startPos, endPos));
                startPos = endPos;
            }

            // Добавляем последний слог
            syllables.push(word.substring(startPos));

            return syllables;
        }


        // Сброс игры
        function resetGame() {
            resetTimer();
            resetStatistics();
            updateStatisticsDisplay();

            if (gameMode === 'alphabet') {
                createAlphabetPanels();
            } else {
                setNewTarget();
                createImagePanels();
            }

            updateLettersProgress();
        }
    </script>

    <script>
        // Регистрация Service Worker для PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(reg => console.log('Service Worker зарегистрирован:', reg))
                    .catch(err => console.log('Ошибка регистрации Service Worker:', err));
            });
        }
    </script>
</body>

</html>